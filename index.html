<!DOCTYPE html>
<html>
    <head>
        <title>Versho</title>
        <link rel="stylesheet" href="vershostyles.css"/>
        <link rel="icon" href="images/flyingshoes.webp" type="image/x-icon"/>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        
    </head>
    <body>
        <div class="s-layout">
            <div class="s-layout__sidebar">
                <div>
                    <img id="logoid" src="images/vershologo.png" style="height:65px;"/>
                </div>
                <nav class="s-sidebar__nav">
                    <ul>
                        <li>
                        <a class="s-sidebar__nav-link" href="#versushome" onmouseleave="leavefunc('hometext', 'homeimg', 'images/home.png')" onmouseover="hoverfunc('hometext', 'homeimg', 'images/homeanimated.gif')">
                            <img class="menuicon" id="homeimg" style="height: 25px;" src="images/home.png"/><em id="hometext">Home</em>
                        </a>
                        </li>
                        <li>
                        <a class="s-sidebar__nav-link" href="#trendspage" onmouseleave="leavefunc('trendstext', 'trendimg', 'images/trendchart.png')" onmouseover="hoverfunc('trendstext', 'trendimg', 'images/trendanimated.gif')">
                            <img class="menuicon" id="trendimg" style="height: 25px;" src="images/trendchart.png"/><em id="trendstext">Trends</em>
                        </a>
                        </li>
                    </ul>
                </nav>
            </div>

            <!-- Content -->

            <main class="s-layout__content">
                <div id="nikemodal" class="modal" style="display:block; border:none;box-shadow:none;">
                    <div id="nikemodalcontent" class="modal-content" style="border:none;box-shadow:none;">
                      
                    </div>
                </div>
                <div id="stockxmodal" class="modal" style="display:block; box-shadow:none;border:none;">
                    <div id="stockxmodalcontent" class="modal-content" style="border:none;box-shadow:none;">
                      <img class="logo" src="images/stockxlogo.jpg" style="width:80px;"/>
                    </div>
                </div>
            </main>

            <script>
                //Intro animation
                setTimeout(function() {
                    document.body.style.opacity = 1;
                    document.body.style.backgroundImage = "none";
                    document.body.style.backgroundSize = "cover";
                    document.body.style.backgroundColor = "#ffffff";
                }, 1500);

                function introAnimation() {
                    document.body.style.opacity = 0;
                    document.body.style.backgroundImage = "url('images/vershologo.png')";
                    document.body.style.backgroundPosition = "center";
                    document.body.style.backgroundSize = "300px";
                }
                introAnimation();

                //Constantly looping scaling function
                setInterval(function() {
                    let sidebar = document.getElementsByClassName('s-sidebar__nav')[0];
                    let nikemodal = document.getElementById("nikemodal");
                    let stockxmodal = document.getElementById("stockxmodal");

                    if(sidebar.getBoundingClientRect().width >= 56) {
                        nikemodal.style.marginLeft = '220px';
                        stockxmodal.style.height = '80%';
                        nikemodal.style.height = '80%';
                        stockxmodal.style.width = '37%';
                        nikemodal.style.width = '37%';
                        stockxmodal.style.marginLeft = `${nikemodal.getBoundingClientRect().width + nikemodal.offsetLeft+30}px`;
                        stockxmodal.style.marginTop = `100px`;

                    }
                    if (sidebar.getBoundingClientRect().width <= 56) {
                        nikemodal.style.marginLeft = '70px';
                        stockxmodal.style.height = '55%';
                        nikemodal.style.height = '45%';
                        stockxmodal.style.width = '87%';
                        nikemodal.style.width = '90%';
                        stockxmodal.style.marginLeft = `${nikemodal.offsetLeft+20}px`;
                        stockxmodal.style.marginTop = `${nikemodal.offsetHeight+110}px`;
                    }
                    
                }, 0);
                //Callback to nike store XMLHTTPREQUEST
                function nikereqListener () {
                    //Unecessary GUI removal
                    document.getElementById('nikemodalcontent').insertAdjacentHTML('beforeend', this.responseText);
                    document.getElementById('MobileMenuButton').remove();
                    //Specific html node removals
                    document.getElementsByClassName('pre-l-wrapper mauto-sm d-sm-flx flx-dir-sm-r flx-jc-sm-sb flx-wr-sm-nw')[0].remove();
                    document.getElementsByClassName('pre-l-brand-header d-sm-h d-lg-b z3')[0].remove();
                    document.getElementsByClassName('icon-btn ripple d-sm-b')[0].remove();
                    document.getElementsByClassName('pre-btn-header ripple mr3-sm d-sm-h d-lg-ib')[0].remove();
                    document.getElementsByClassName('pre-search-input-box d-sm-b flx-dir-lg-c flx-ai-lg-fe d-lg-flx flx-gro-sm-1 flx-gro-lg-0')[0].remove();
                    //Image card removals
                    let imagecards = document.getElementsByClassName('product-card__hero-image');
                    while(imagecards.length > 0) {
                        for(let n = 0; n < imagecards.length; n++)
                            imagecards[n].remove();
                    }
                }
                var nikereq = new XMLHttpRequest();
                nikereq.addEventListener("load", nikereqListener);
                nikereq.open("GET", "https://www.nike.com/w?q=Nike Air Force 1 Low white 07&vst=Nike Air Force 1 Low white 07");
                nikereq.send();

                //Callback to stockx server XMLHTTPREQUEST
                function stockxreqListener () {
                    document.getElementById('stockxmodalcontent').insertAdjacentHTML('beforeend', this.responseText);
                }
                var stockxreq = new XMLHttpRequest();
                stockxreq.addEventListener("load", stockxreqListener);
                stockxreq.open("GET", "https://sleepy-waters-67122.herokuapp.com/getstockx/nike%20air%20force%201%20low%20white%2007");
                stockxreq.send();

                //Sidebar functions
                function leavefunc (textid, iconid, iconurl) {
                    document.getElementById(textid).style.color = '#333333';
                    document.getElementById(iconid).src = iconurl;
                }
                function hoverfunc (textid, iconid, iconurl) {
                    document.getElementById(textid).style.color = 'white';
                    document.getElementById(iconid).src = iconurl;
                }
            </script>
            
        </div>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    </body>
</html>